<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ heritage.name }} — Details</title>

  <style>
    
    :root{
      --bg:#f5f6f7;
      --card:#fff;
      --accent:#e6b800;
      --muted:#555;
      --radius:12px;
      --gap:20px;
      --container-pad:28px;
    }
    body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('https://images.unsplash.com/photo-1559554735-25c40644c2cd?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fG15c29yZSUyMHBhbGFjZXxlbnwwfHwwfHx8MA%3D%3D');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0.8;   /* Adjust opacity here */
  z-index: -1;
}

    .back-btn{
      display:inline-block;
      background:#222;
      color:#fff;
      padding:10px 16px;
      border-radius:8px;
      text-decoration:none;
      margin-bottom:16px;
    }

    .card {
      background:var(--card);
      padding:var(--container-pad);
      border-radius:var(--radius);
      box-shadow: 0 8px 18px rgba(16,24,40,0.06);
    }

    .top {
      display:flex;
      gap:var(--gap);
      align-items:center; /* vertical center */
    }

    .image-box{
      flex:0 0 380px;
    }

    .image-box img{
      width:100%;
      height:260px;
      object-fit:cover;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.06);
      display:block;
    }

    .details{
      flex:1;
      display:flex;
      flex-direction:column;
      justify-content:center; /* vertical center of the right column */
      gap:10px;
    }

    .title-row{
      display:flex;
      align-items:flex-start;
      gap:18px;
    }

    h1{
      margin:0;
      font-size:28px;
      letter-spacing:.2px;
    }

    .meta {
      color:var(--muted);
      font-weight:600;
    }

    .desc{
      margin-top:6px;
      color:#222;
      max-width:100%;
      text-align:justify;
    }

    .info-grid{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr;
      gap:8px;
    }

    .info-item strong { color:#111; }
    .info-item { color:var(--muted); }

    /* Map section */
    .map-section{
      margin-top:20px;
      background:var(--card);
      padding:18px;
      border-radius:var(--radius);
      box-shadow: 0 8px 18px rgba(16,24,40,0.05);
    }

    iframe.map {
      width:100%;
      height:360px;
      border:0;
      border-radius:8px;
    }

    .map-actions{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .link-button{
      background:var(--accent);
      color:#2b1e0f;
      padding:8px 14px;
      border-radius:10px;
      text-decoration:none;
      font-weight:600;
    }

    /* responsive */
    @media (max-width:920px){
      .top{
        flex-direction:column;
        align-items:stretch;
      }
      .image-box{ flex:0 0 auto; }
      .image-box img{ height:220px; }
    }

    @media (max-width:480px){
      h1{ font-size:20px; }
      .image-box img{ height:180px; }
    }
  </style>
</head>
<body>
  <div class="page">

    <!-- Back button -->
    <a href="{% url 'heritage_list' %}" class="back-btn">← Back</a>

    <!-- Main card -->
    <div class="card">

      <div class="top">
        <!-- LEFT: Image -->
        <div class="image-box">
          {% if heritage.image %}
            <img src="{{ heritage.image.url }}" alt="{{ heritage.name }}">
          {% else %}
            <!-- placeholder image -->
            <img src="https://via.placeholder.com/640x360?text=No+Image" alt="No image available">
          {% endif %}
        </div>

        <!-- RIGHT: Details (centered vertically) -->
        <div class="details">
          <div class="title-row">
            <h1>{{ heritage.name }}</h1>
          </div>

          <div class="meta">
            Category: <strong>{{ heritage.category.name }}</strong>
          </div>

          <p class="desc">
            {{ heritage.description }}
          </p>

          <div class="info-grid">
            {% if heritage.timings %}
            <div class="info-item"><strong>Timings:</strong> {{ heritage.timings }}</div>
            {% endif %}

            {% if heritage.entry_fee %}
            <div class="info-item"><strong>Entry Fee:</strong> {{ heritage.entry_fee }}</div>
            {% endif %}

            {% if heritage.established_year %}
            <div class="info-item"><strong>Established:</strong> {{ heritage.established_year }}</div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- MAP: only if location exists -->
    <div class="map-section">
      <h3>Location</h3>

      {% if heritage.location_info %}
        <p><strong>Address:</strong> {{ heritage.location_info.address }}{% if heritage.location_info.area %}, {{ heritage.location_info.area }}{% endif %}</p>

        {# Use lat+lng when available, otherwise use address string #}
        {% if heritage.location_info.latitude and heritage.location_info.longitude %}
          {% comment %} lat/lng available {% endcomment %}
          {% with lat=heritage.location_info.latitude lng=heritage.location_info.longitude %}
            <iframe
              class="map"
              loading="lazy"
              allowfullscreen
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q={{ lat }},{{ lng }}&z=16&output=embed">
            </iframe>

            <div class="map-actions">
              <a class="link-button" target="_blank" rel="noopener"
                 href="https://www.google.com/maps/search/?api=1&query={{ lat }},{{ lng }}">
                Open in Google Maps
              </a>
              <a class="link-button" target="_blank" rel="noopener"
                 href="https://www.google.com/maps/dir/?api=1&destination={{ lat }},{{ lng }}">
                Directions
              </a>
            </div>
          {% endwith %}
        {% else %}
          {% comment %} fallback to using address (URL-encoded) {% endcomment %}
          {% with q=heritage.location_info.address|default:heritage.location_info.area|urlencode %}
            <iframe
              class="map"
              loading="lazy"
              allowfullscreen
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q={{ q }}&output=embed">
            </iframe>

            <div class="map-actions">
              <a class="link-button" target="_blank" rel="noopener"
                 href="https://www.google.com/maps/search/?api=1&query={{ q }}">
                Open in Google Maps
              </a>
            </div>
          {% endwith %}
        {% endif %}

      {% else %}
        <p>No location information available for this place.</p>
      {% endif %}
    </div>

  </div>
</body>
</html>
